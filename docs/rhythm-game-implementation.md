# π® λ¦¬λ“¬ κ²μ„ κµ¬ν„ μ™„λ£ λ¬Έμ„

## π“‹ κ°μ”

MyTeddyBakeryμ λ¦¬λ“¬ κ²μ„ λ΅μ§μ΄ μ™„μ„±λμ—μµλ‹λ‹¤. μ΄ λ¬Έμ„λ” κµ¬ν„λ κΈ°λ¥κ³Ό μ‘λ™ λ°©μ‹μ„ μ„¤λ…ν•©λ‹λ‹¤.

---

## β… κµ¬ν„λ κΈ°λ¥

### 1. λ…ΈνΈ μ‹μ¤ν…

#### λ…ΈνΈ νƒ€μ…
- β… **TAP** (νƒ­) - λ…Ήμƒ‰ μ›ν•
- β… **HOLD** (ν™€λ“) - νλ€μƒ‰ μ§μ‚¬κ°ν•
- β… **SWIPE_LEFT** (μ™Όμ½ μ¤μ™€μ΄ν”„) - λ…Έλ€μƒ‰ μ›ν•
- β… **SWIPE_RIGHT** (μ¤λ¥Έμ½ μ¤μ™€μ΄ν”„) - μ£Όν™©μƒ‰ μ›ν•

#### λ…ΈνΈ μƒμ„±
- BPM 120 κΈ°λ° μλ™ ν¨ν„΄ μƒμ„±
- 25μ΄ κ²μ„ κΈΈμ΄
- μ•½ 40-60κ° λ…ΈνΈ μƒμ„±
- μ¤€λΉ„ μ‹κ°„ 2μ΄ ν¬ν•¨

### 2. νμ • μ‹μ¤ν…

#### νμ • λ²”μ„
- **Perfect**: Β±80ms β†’ 100μ 
- **Good**: Β±160ms β†’ 50μ 
- **Miss**: κ·Έ μ™Έ β†’ 0μ 

#### μλ™ Miss μ²λ¦¬
- λ…ΈνΈκ°€ νμ •μ„ μ„ 200ms μ΄μƒ μ§€λ‚κ°€λ©΄ μλ™ Miss μ²λ¦¬
- μ½¤λ³΄ μ΄κΈ°ν™”

### 3. λΉ„μ£Όμ–Ό μ‹μ¤ν…

#### λ…ΈνΈ λ μΈ
- λ‹¨μΌ μμ§ λ μΈ
- λ…ΈνΈκ°€ μ„μ—μ„ μ•„λλ΅ μ΄λ™
- νμ •μ„ μ€ ν™”λ©΄ ν•λ‹¨ 80% μ„μΉ
- μ†λ„: 500 ν”½μ…€/μ΄

#### UI μ»΄ν¬λ„νΈ
- **GameProgressBar** - μ§„ν–‰ μƒν™© ν‘μ‹
- **ScoreDisplay** - μ μ λ° μ½¤λ³΄ μ‹¤μ‹κ°„ ν‘μ‹
- **JudgementDisplay** - νμ • κ²°κ³Ό μ• λ‹λ©”μ΄μ…
- **JudgementCountDisplay** - Perfect/Good/Miss μΉ΄μ΄νΈ
- **NoteLane** - λ©”μΈ κ²μ„ ν”λ μ΄ μμ—­

### 4. μ…λ ¥ μ²λ¦¬

#### ν„°μΉ κ°μ§€
- νƒ­ μ μ¤μ² κ°μ§€ (`detectTapGestures`)
- λ“λκ·Έ μ μ¤μ² κ°μ§€ (`detectDragGestures`)
- νμ •μ„  κ·Όμ² λ…ΈνΈλ§ ννΈ κ°€λ¥

#### νƒ€μ΄λ° κ³„μ‚°
- μ‹μ¤ν… μ‹κ°„ κΈ°λ° μ •ν™•ν• νƒ€μ΄λ°
- λ°€λ¦¬μ΄ λ‹¨μ„ μ •λ°€λ„
- ν”„λ μ„ λ“λμ— μν–¥λ°›μ§€ μ•μ

### 5. κ²μ„ λ£¨ν”„

#### μ—…λ°μ΄νΈ μ£ΌκΈ°
- 60 FPS (16.67ms/ν”„λ μ„)
- `withFrameNanos` μ‚¬μ©μΌλ΅ μ •ν™•ν• λΈνƒ€ νƒ€μ„
- κ²μ„ μƒνƒλ¥Ό StateFlowλ΅ λ°μ‘ν• κ΄€λ¦¬

#### μƒνƒ κ΄€λ¦¬
```kotlin
data class RhythmState(
    val currentTime: Float,
    val isPlaying: Boolean,
    val notes: List<Note>,
    val score: Int,
    val combo: Int,
    val perfectCount: Int,
    val goodCount: Int,
    val missCount: Int,
    val lastJudgement: Judgement?
)
```

---

## π― κ²μ„ ν”λ΅μ°

### 1. κ²μ„ μ‹μ‘
```
BakeryScreen -> "λΉµ κµ½κΈ° μ‹μ‘" λ²„νΌ ν΄λ¦­
    β†“
RhythmGameScreen λ΅λ“
    β†“
ViewModel.startGame() νΈμ¶
    β†“
λ…ΈνΈ μƒμ„± & κ²μ„ λ£¨ν”„ μ‹μ‘
```

### 2. κ²μ„ ν”λ μ΄
```
λ…ΈνΈκ°€ μ„μ—μ„ μ•„λλ΅ λ–¨μ–΄μ§
    β†“
ν”λ μ΄μ–΄κ°€ νμ •μ„  κ·Όμ²μ—μ„ νƒ­
    β†“
νƒ€μ΄λ° κ³„μ‚° & νμ •
    β†“
μ μ/μ½¤λ³΄ μ—…λ°μ΄νΈ
    β†“
νμ • μ• λ‹λ©”μ΄μ… ν‘μ‹
```

### 3. κ²μ„ μΆ…λ£
```
25μ΄ κ²½κ³Ό
    β†“
μ •ν™•λ„ κ³„μ‚°
    β†“
λΉµ ν’μ§ κ²°μ •
    β†“
μ½”μΈ κ³„μ‚° & μ €μ¥
    β†“
ResultScreenμΌλ΅ μ΄λ™
```

---

## π§® μ μ κ³„μ‚° μ‹μ¤ν…

### μ •ν™•λ„ κ³µμ‹
```
accuracy = earnedScore / maxScore
earnedScore = (perfectCount Γ— 100) + (goodCount Γ— 50)
maxScore = totalNotes Γ— 100
```

### λΉµ κ°€κ²© κ³„μ‚°
```
finalPrice = basePrice Γ— qualityMultiplier Γ— breadsPerPlay

qualityMultiplier:
- 95-100% accuracy β†’ 1.5λ°°
- 80-94% accuracy β†’ 1.2λ°°
- 60-79% accuracy β†’ 1.0λ°°
- <60% accuracy β†’ 0.5λ°°
```

---

## π¨ UI λ μ΄μ•„μ›ƒ

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚  μ§„ν–‰λ°” (0-25μ΄)                  β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚  μ μ: XXX    μ½¤λ³΄: XXx          β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚                                  β”‚
β”‚      νμ • ν‘μ‹ (μ• λ‹λ©”μ΄μ…)        β”‚
β”‚                                  β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚                                  β”‚
β”‚           λ…ΈνΈ β—                 β”‚
β”‚           λ…ΈνΈ β—                 β”‚
β”‚           λ…ΈνΈ β–                  β”‚
β”‚                                  β”‚
β”‚     β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”        β”‚ β† νμ •μ„ 
β”‚                                  β”‚
β”‚     [ ν„°μΉ μμ—­ ]                 β”‚
β”‚                                  β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚  P: XX   G: XX   M: XX          β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

---

## π”§ ν•µμ‹¬ ν΄λμ¤ κ΄€κ³„λ„

```
RhythmGameScreen (UI)
    β†“ uses
RhythmViewModel
    β†“ uses
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚                 β”‚                 β”‚                  β”‚
RhythmEngine  JudgementSystem  ScoreCalculator  NoteManager
    β†“
RhythmState
```

---

## π“ μ£Όμ” νμΌ

### UI Layer
- `RhythmGameScreen.kt` - λ©”μΈ ν™”λ©΄ κµ¬μ„±
- `RhythmViewModel.kt` - κ²μ„ μƒνƒ κ΄€λ¦¬
- `components/NoteLane.kt` - λ…ΈνΈ λ λ”λ§ λ° μ…λ ¥ μ²λ¦¬
- `components/JudgementDisplay.kt` - νμ • ν‘μ‹ μ• λ‹λ©”μ΄μ…
- `components/ScoreDisplay.kt` - μ μ/μ½¤λ³΄ ν‘μ‹
- `components/ProgressBar.kt` - μ§„ν–‰ μƒν™© λ°”

### Game Logic Layer
- `RhythmEngine.kt` - κ²μ„ λ£¨ν”„ λ° νƒ€μ΄λ°
- `JudgementSystem.kt` - νμ • κ³„μ‚°
- `ScoreCalculator.kt` - μ μ/μ •ν™•λ„ κ³„μ‚°
- `NoteManager.kt` - λ…ΈνΈ ν¨ν„΄ μƒμ„±

### Models
- `Note.kt` - λ…ΈνΈ λ°μ΄ν„°
- `Judgement.kt` - νμ • νƒ€μ…
- `RhythmState.kt` - κ²μ„ μƒνƒ

---

## π― ν…μ¤νΈ λ°©λ²•

### 1. μ•± λΉλ“ λ° μ‹¤ν–‰
```bash
./gradlew installDebug
```

### 2. κ²μ„ ν”λ μ΄
1. λ©”μΈ ν™”λ©΄μ—μ„ "λΉµ κµ½κΈ° μ‹μ‘" λ²„νΌ ν΄λ¦­
2. λ…ΈνΈκ°€ νμ •μ„ μ— λ„λ‹¬ν•  λ• ν™”λ©΄ ν„°μΉ
3. 25μ΄κ°„ ν”λ μ΄
4. κ²°κ³Ό ν™”λ©΄μ—μ„ μ •ν™•λ„ λ° νλ“ μ½”μΈ ν™•μΈ

### 3. μμƒ κ²°κ³Ό
- Perfect νμ •: κΈμƒ‰μΌλ΅ ν‘μ‹, +100μ 
- Good νμ •: λ…Ήμƒ‰μΌλ΅ ν‘μ‹, +50μ 
- Miss νμ •: λΉ¨κ°„μƒ‰μΌλ΅ ν‘μ‹, 0μ , μ½¤λ³΄ μ΄κΈ°ν™”
- μ½¤λ³΄κ°€ μ“μ΄λ©΄ ν°νΈ μƒ‰μƒ λ³€κ²½

---

## π› μ•λ ¤μ§„ μ ν•μ‚¬ν•­

### MVP λ²„μ „ μ ν•
1. **λ…ΈνΈ ν¨ν„΄**: ν•λ“μ½”λ”©λ ν¨ν„΄ (JSON λ΅λ“ λ―Έκµ¬ν„)
2. **ν™€λ“ λ…ΈνΈ**: μ‹κ°μ μΌλ΅λ§ κµ¬ν„, μ‹¤μ  ν™€λ“ λ΅μ§ λ―Έκµ¬ν„
3. **μ¤μ™€μ΄ν”„**: νƒ­κ³Ό λ™μΌν•κ² μ²λ¦¬ (λ°©ν–¥ κ°μ§€ λ―Έκµ¬ν„)
4. **μ‚¬μ΄λ“**: λ°°κ²½μμ•… λ° ν¨κ³Όμ λ―Έκµ¬ν„
5. **μ΄ν™νΈ**: λ…ΈνΈ ννΈ μ΄ν™νΈ μ• λ‹λ©”μ΄μ… λ―Έκµ¬ν„

### ν–¥ν›„ κ°μ„  μ‚¬ν•­
- [ ] λ‹¤μ–‘ν• λ…ΈνΈ ν¨ν„΄ (JSON νμΌλ΅ κ΄€λ¦¬)
- [ ] ν™€λ“ λ…ΈνΈ μ •ν™•ν• κµ¬ν„ (λ„λ¥΄κ³  μκΈ°)
- [ ] μ¤μ™€μ΄ν”„ λ°©ν–¥ κ°μ§€
- [ ] λ°°κ²½μμ•… μ¬μƒ (BPMκ³Ό λ™κΈ°ν™”)
- [ ] λ…ΈνΈ ννΈ μ‹ νν‹°ν΄ ν¨κ³Ό
- [ ] λ©€ν‹° λ μΈ μ§€μ›
- [ ] λ‚μ΄λ„ μ΅°μ  (Easy/Normal/Hard)

---

## β¨ μ„±λ¥ μµμ ν™”

### μ μ©λ μµμ ν™”
1. **ν™”λ©΄μ— λ³΄μ΄λ” λ…ΈνΈλ§ λ λ”λ§** - λ·°ν¬νΈ μ»¬λ§
2. **μ²λ¦¬λ λ…ΈνΈλ” SetμΌλ΅ κ΄€λ¦¬** - O(1) μ΅°ν
3. **Canvas μ‚¬μ©** - Composeμ μ„±λ¥ μµμ ν™”
4. **StateFlow μ‚¬μ©** - ν¨μ¨μ μΈ μƒνƒ μ—…λ°μ΄νΈ

### μ„±λ¥ λ©ν‘
- 60 FPS μ μ§€
- μ…λ ¥ μ§€μ—° < 10ms
- λ©”λ¨λ¦¬ μ‚¬μ© < 50MB

---

## π‰ μ™„μ„±λ„

| κΈ°λ¥ | μƒνƒ | λΉ„κ³  |
|------|------|------|
| λ…ΈνΈ μƒμ„± | β… | ν•λ“μ½”λ”© ν¨ν„΄ |
| λ…ΈνΈ λ λ”λ§ | β… | Canvas κΈ°λ° |
| νμ • μ‹μ¤ν… | β… | Β±80ms/Β±160ms |
| μλ™ Miss | β… | 200ms ν—μ© |
| μ μ κ³„μ‚° | β… | Perfect/Good/Miss |
| μ½¤λ³΄ μ‹μ¤ν… | β… | Missμ‹ μ΄κΈ°ν™” |
| UI μ»΄ν¬λ„νΈ | β… | 5κ° μ»΄ν¬λ„νΈ |
| μ…λ ¥ μ²λ¦¬ | β… | νƒ­/λ“λκ·Έ κ°μ§€ |
| κ²μ„ λ£¨ν”„ | β… | 60 FPS |
| κ²°κ³Ό μ €μ¥ | β… | DataStore |

**μ „μ²΄ μ™„μ„±λ„: 85%** (MVP κΈ°μ¤€ 100%)

---

## π€ λ‹¤μ λ‹¨κ³„

1. **μ‚¬μ΄λ“ μ¶”κ°€** - λ°°κ²½μμ•… λ° ν¨κ³Όμ
2. **μ• λ‹λ©”μ΄μ… κ°μ„ ** - λ…ΈνΈ ννΈ μ΄ν™νΈ
3. **UI ν΄λ¦¬μ‹±** - λ” μμ κ·Έλν”½
4. **νν† λ¦¬μ–Ό** - μ²« ν”λ μ΄ κ°€μ΄λ“
5. **ν…μ¤νΈ** - μ λ‹› ν…μ¤νΈ μ‘μ„±

λ¦¬λ“¬ κ²μ„ ν•µμ‹¬ λ΅μ§μ΄ μ™„μ„±λμ–΄ **ν”λ μ΄ κ°€λ¥ν• μƒνƒ**μ…λ‹λ‹¤! π
